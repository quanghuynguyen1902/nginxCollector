{"remainingRequest":"/home/quanghuy/Desktop/dashboard/montoring/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/quanghuy/Desktop/dashboard/montoring/src/components/user-detail/UserListTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/quanghuy/Desktop/dashboard/montoring/src/components/user-detail/UserListTable.vue","mtime":1619520973086},{"path":"/home/quanghuy/Desktop/dashboard/montoring/node_modules/cache-loader/dist/cjs.js","mtime":1612063424763},{"path":"/home/quanghuy/Desktop/dashboard/montoring/node_modules/babel-loader/lib/index.js","mtime":1613788894194},{"path":"/home/quanghuy/Desktop/dashboard/montoring/node_modules/cache-loader/dist/cjs.js","mtime":1612063424763},{"path":"/home/quanghuy/Desktop/dashboard/montoring/node_modules/vue-loader/lib/index.js","mtime":1613788894243}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBVc2VyU2VydmljZSBmcm9tICIuLi8uLi9hcGkvdXNlclNlcnZpY2UiOwppbXBvcnQgQXBpIGZyb20gIkAvY29uc3RhbnRzL2JhY2tlbmRBcGkiOwppbXBvcnQgRGV0YWlsUmVxdWVzdCBmcm9tICJAL2NvbXBvbmVudHMvRGV0YWlsUmVxdWVzdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXNlckxpc3RUYWJsZSIsCiAgY29tcG9uZW50czogewogICAgRGV0YWlsUmVxdWVzdAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGE6IFtdLAogICAgICBjb2xsYXBzZUR1cmF0aW9uOiAwLAogICAgICBmaWVsZHM6IFsKICAgICAgICB7IGtleTogInVzZXJfaWQiIH0sCiAgICAgICAgeyBrZXk6ICJ1cmwiIH0sCiAgICAgICAgeyBrZXk6ICJyZXF1ZXN0X21ldGhvZCIgfSwKICAgICAgICB7IGtleTogInN0YXR1cyIgfSwKICAgICAgICB7CiAgICAgICAgICBrZXk6ICJzaG93X2RldGFpbHMiLAogICAgICAgICAgbGFiZWw6ICJEZXRhaWwiLAogICAgICAgICAgX3N0eWxlOiAid2lkdGg6MSUiLAogICAgICAgICAgc29ydGVyOiBmYWxzZSwKICAgICAgICAgIGZpbHRlcjogZmFsc2UKICAgICAgICB9CiAgICAgIF0sCiAgICAgIHBhZ2U6IDEsCiAgICAgIHRvdGFscGFnZTogMQogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldERhdGEoKTsKICB9LAogIHdhdGNoOiB7CiAgICAkcm91dGUodG8sIGZyb20pIHsKICAgICAgaWYgKHRvICE9PSBmcm9tKSB7CiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBjaGFuZ2VEYXRhKCkgewogICAgICByZXR1cm4gdGhpcy5kYXRhOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgZ2V0RGF0YSgpIHsKICAgICAgbGV0IHJlc3BvbnNlID0gIiI7CiAgICAgIHRoaXMucGFnZSA9IHBhcnNlSW50KHRoaXMuJHJvdXRlLnF1ZXJ5LnBhZ2UpIHx8IDE7CgogICAgICByZXNwb25zZSA9IGF3YWl0IFVzZXJTZXJ2aWNlLmdldFVzZXJCb2FyZCgKICAgICAgICBgJHtBcGkuVVNFUl9ERVRBSUxTfT9wYWdlPSR7dGhpcy5wYWdlfSZ1c2VyX2lkPSR7dGhpcy4kcm91dGUucGFyYW1zLnVzZXJfaWR9YAogICAgICApOwoKICAgICAgdGhpcy50b3RhbHBhZ2UgPSBNYXRoLmNlaWwocmVzcG9uc2UuZGF0YS5jb3VudHMgLyAxMCk7CiAgICAgIHRoaXMuZGF0YSA9IHJlc3BvbnNlLmRhdGEucmVzdWx0cy5tYXAoKGl0ZW0sIGlkKSA9PiB7CiAgICAgICAgcmV0dXJuIHsgLi4uaXRlbSwgaWQgfTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0UmVzdWx0UGFnZShwYWdlKSB7CiAgICAgIHRoaXMucGFnZSA9IHBhZ2U7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiB0aGlzLiRyb3V0ZS5mdWxsUGF0aCwKICAgICAgICBxdWVyeTogeyBwYWdlOiB0aGlzLnBhZ2UgfQogICAgICB9KTsKICAgIH0sCiAgICB0b2dnbGVEZXRhaWxzKGl0ZW0pIHsKICAgICAgdGhpcy4kc2V0KHRoaXMuZGF0YVtpdGVtLmlkXSwgIl90b2dnbGVkIiwgIWl0ZW0uX3RvZ2dsZWQpOwogICAgICB0aGlzLmNvbGxhcHNlRHVyYXRpb24gPSAzMDA7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmNvbGxhcHNlRHVyYXRpb24gPSAwOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRCYWRnZShyZXF1ZXN0X21ldGhvZCkgewogICAgICBzd2l0Y2ggKHJlcXVlc3RfbWV0aG9kKSB7CiAgICAgICAgY2FzZSAiR0VUIjoKICAgICAgICAgIHJldHVybiAic3VjY2VzcyI7CiAgICAgICAgY2FzZSAiT1BUSU9OUyI6CiAgICAgICAgICByZXR1cm4gInNlY29uZGFyeSI7CiAgICAgICAgY2FzZSAiUE9TVCI6CiAgICAgICAgICByZXR1cm4gIndhcm5pbmciOwogICAgICAgIGNhc2UgIkRFTEVURSI6CiAgICAgICAgICByZXR1cm4gImRhbmdlciI7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICJwcmltYXJ5IjsKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["UserListTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserListTable.vue","sourceRoot":"src/components/user-detail","sourcesContent":["<template>\n  <CCardBody>\n    <CDataTable\n      :items=\"changeData\"\n      :fields=\"fields\"\n      :items-per-page=\"10\"\n      hover\n      sorter\n    >\n      <template #request_method=\"{item}\">\n        <td>\n          <CBadge :color=\"getBadge(item.request_method)\">\n            {{ item.request_method }}\n          </CBadge>\n        </td>\n      </template>\n      <template #show_details=\"{item, index}\">\n        <td class=\"py-2\">\n          <CButton\n            color=\"primary\"\n            variant=\"outline\"\n            square\n            size=\"sm\"\n            @click=\"toggleDetails(item, index)\"\n          >\n            {{ Boolean(item._toggled) ? \"Hide\" : \"Show\" }}\n          </CButton>\n        </td>\n      </template>\n      <template #details=\"{item}\">\n        <CCollapse :show=\"Boolean(item._toggled)\" :duration=\"collapseDuration\">\n          <detail-request :item=\"item\"></detail-request>\n        </CCollapse>\n      </template>\n    </CDataTable>\n    <CPagination\n      :activePage.sync=\"page\"\n      :pages=\"totalpage\"\n      size=\"sm\"\n      align=\"center\"\n      @update:activePage=\"getResultPage(page)\"\n    />\n  </CCardBody>\n</template>\n<script>\nimport UserService from \"../../api/userService\";\nimport Api from \"@/constants/backendApi\";\nimport DetailRequest from \"@/components/DetailRequest\";\nexport default {\n  name: \"UserListTable\",\n  components: {\n    DetailRequest\n  },\n  data() {\n    return {\n      data: [],\n      collapseDuration: 0,\n      fields: [\n        { key: \"user_id\" },\n        { key: \"url\" },\n        { key: \"request_method\" },\n        { key: \"status\" },\n        {\n          key: \"show_details\",\n          label: \"Detail\",\n          _style: \"width:1%\",\n          sorter: false,\n          filter: false\n        }\n      ],\n      page: 1,\n      totalpage: 1\n    };\n  },\n  mounted() {\n    this.getData();\n  },\n  watch: {\n    $route(to, from) {\n      if (to !== from) {\n        location.reload();\n      }\n    }\n  },\n  computed: {\n    changeData() {\n      return this.data;\n    }\n  },\n  methods: {\n    async getData() {\n      let response = \"\";\n      this.page = parseInt(this.$route.query.page) || 1;\n\n      response = await UserService.getUserBoard(\n        `${Api.USER_DETAILS}?page=${this.page}&user_id=${this.$route.params.user_id}`\n      );\n\n      this.totalpage = Math.ceil(response.data.counts / 10);\n      this.data = response.data.results.map((item, id) => {\n        return { ...item, id };\n      });\n    },\n    getResultPage(page) {\n      this.page = page;\n      this.$router.push({\n        path: this.$route.fullPath,\n        query: { page: this.page }\n      });\n    },\n    toggleDetails(item) {\n      this.$set(this.data[item.id], \"_toggled\", !item._toggled);\n      this.collapseDuration = 300;\n      this.$nextTick(() => {\n        this.collapseDuration = 0;\n      });\n    },\n    getBadge(request_method) {\n      switch (request_method) {\n        case \"GET\":\n          return \"success\";\n        case \"OPTIONS\":\n          return \"secondary\";\n        case \"POST\":\n          return \"warning\";\n        case \"DELETE\":\n          return \"danger\";\n        default:\n          \"primary\";\n      }\n    }\n  }\n};\n</script>\n"]}]}